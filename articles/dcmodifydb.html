<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dcmodifydb">
<title>dcmodifydb • dcmodifydb</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dcmodifydb">
<meta property="og:description" content="dcmodifydb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dcmodifydb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/dcmodifydb.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/scenarios.html">Correction scenarios</a>
    <a class="dropdown-item" href="../articles/syntax.html">Modification syntax</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/data-cleaning/dcmodifydb/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="dcmodifydb_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>dcmodifydb</h1>
            <h3 data-toc-skip class="subtitle">Documented reproducible data correction on a database</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/data-cleaning/dcmodifydb/blob/HEAD/vignettes/dcmodifydb.Rmd" class="external-link"><code>vignettes/dcmodifydb.Rmd</code></a></small>
      <div class="d-none name"><code>dcmodifydb.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The goal of dcmodifydb is to apply modification rules specified with <code>dcmodify</code> on a database table, allowing for documented, reproducable data cleaning adjustments in a database.</p>
<p><code>dcmodify</code> separates <strong>intent</strong> from <strong>execution</strong>: a user specifies the <em>what</em> , <em>why</em> and <em>how</em> of an automatic data change and uses <code>dcmodifydb</code> to execute them on a <code>tbl</code> database table.</p>
<p><code>dcmodidfydb</code> is optimized and restricted to database tables that can be accessed within R through <code>DBI</code>. It uses the <code>dbplyr</code> package to translate the data correction rules in R syntax into SQL syntax. The advantage of this approach is that all data correction is done within the database, which may be a requirement of your organisation or because the data table is simply too large to be held in memory. A disadvantage is that not all R statements can be translated into SQL statement, so <code>dcmodifydb</code> is more restricted than <code>dcmodify</code> which can use the full R potential. Nonetheless <code>dcmodifydb</code> may be sufficient and efficient for many use cases.</p>
<p>For common error scenario’s see <code><a href="../articles/scenarios.html">vignette("scenarios", package="dcmodifydb")</a></code>. For the supported syntax for specifying rules see <code><a href="../articles/syntax.html">vignette("syntax", package="dcmodifydb")</a></code>.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p><code>dcmodifydb</code> can be installed with</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"dcmodifydb"</span><span class="op">)</span></code></pre></div>
<p>and loaded with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/data-cleaning/dcmodify" class="external-link">dcmodify</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/data-cleaning/dcmodifydb" class="external-link">dcmodifydb</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h3>
<p><code>dcmodifydb</code> works on a database table, so we need a connection to a table within a database.</p>
<p>We set up a database table with sqlite using the person data set, but for your use case you should connect to your database.</p>
<table class="table">
<thead><tr class="header">
<th align="right">income</th>
<th align="right">age</th>
<th align="left">gender</th>
<th align="right">year</th>
<th align="left">smokes</th>
<th align="right">cigarrettes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="right">12</td>
<td align="left">M</td>
<td align="right">2020</td>
<td align="left">no</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="right">2010</td>
<td align="right">14</td>
<td align="left">f</td>
<td align="right">2019</td>
<td align="left">yes</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="right">25</td>
<td align="left">v</td>
<td align="right">19</td>
<td align="left">no</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/copy_to.html" class="external-link">copy_to</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">person</span><span class="op">)</span></code></pre></div>
<p>We know retrieve a handle to the person table using <code>dplyr</code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">person_tbl</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"person"</span><span class="op">)</span>
<span class="va">person_tbl</span>
<span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;person&gt; [?? x 6]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Database: sqlite 3.37.2 [:memory:]</span></span>
<span class="co">#&gt;   income   age gender  year smokes cigarrettes</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>   <span style="text-decoration: underline;">2</span>000    12 M       <span style="text-decoration: underline;">2</span>020 no              10</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>   <span style="text-decoration: underline;">2</span>010    14 f       <span style="text-decoration: underline;">2</span>019 yes              4</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   <span style="text-decoration: underline;">2</span>010    25 v         19 no              <span style="color: #BB0000;">NA</span></span></code></pre></div>
<p>The person dataset clearly contains some errors that should be corrected. We specify the corrections using modifier rules with the function <code>modifier</code>.</p>
<p>First we correct that minors should not have an income and that year should be a long year.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/data-cleaning/dcmodify" class="external-link">dcmodify</a></span><span class="op">)</span> <span class="co"># needed for modifying rules</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/data-cleaning/dcmodifydb" class="external-link">dcmodifydb</a></span><span class="op">)</span> <span class="co"># needed to translate the rules</span>
<span class="fu"><a href="https://rdrr.io/pkg/dcmodify/man/modify_so.html" class="external-link">modify_so</a></span><span class="op">(</span> <span class="va">person_tbl</span>
         , <span class="kw">if</span> <span class="op">(</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">16</span><span class="op">)</span> <span class="va">income</span> <span class="op">=</span> <span class="fl">0</span>
         , <span class="kw">if</span> <span class="op">(</span><span class="va">year</span> <span class="op">&lt;</span> <span class="fl">25</span><span class="op">)</span> <span class="va">year</span> <span class="op">=</span> <span class="va">year</span> <span class="op">+</span> <span class="fl">2000</span>
         <span class="op">)</span>
<span class="co">#&gt; Warning: `copy` not specified, setting `copy=TRUE`, working on copy of table.</span>
<span class="co">#&gt; <span style="color: #949494;"># Source:   lazy query [?? x 6]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Database: sqlite 3.37.2 [:memory:]</span></span>
<span class="co">#&gt;   income   age gender  year smokes cigarrettes</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>      0    12 M       <span style="text-decoration: underline;">2</span>020 no              10</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>      0    14 f       <span style="text-decoration: underline;">2</span>019 yes              4</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   <span style="text-decoration: underline;">2</span>010    25 v       <span style="text-decoration: underline;">2</span>019 no              <span style="color: #BB0000;">NA</span></span></code></pre></div>
<p>Note that the corrections are made on a copy of the table by default, to avoid accidents with the data. Furthermore, directly applying the rules is not optimal. It is better to specifiy the rules separately and document the rules.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># separate rule set</span>
<span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/dcmodify/man/modifier.html" class="external-link">modifier</a></span><span class="op">(</span> <span class="kw">if</span> <span class="op">(</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">16</span><span class="op">)</span> <span class="va">income</span> <span class="op">=</span> <span class="fl">0</span>
             , <span class="kw">if</span> <span class="op">(</span><span class="va">year</span> <span class="op">&lt;</span> <span class="fl">25</span><span class="op">)</span> <span class="va">year</span> <span class="op">=</span> <span class="va">year</span> <span class="op">+</span> <span class="fl">2000</span>
             , <span class="kw">if</span> <span class="op">(</span><span class="va">cigarrettes</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">)</span> <span class="va">smokes</span> <span class="op">=</span> <span class="st">"yes"</span>
             , <span class="kw">if</span> <span class="op">(</span><span class="va">smokes</span> <span class="op">==</span> <span class="st">"no"</span><span class="op">)</span> <span class="va">cigarrettes</span> <span class="op">=</span> <span class="fl">0</span>
             , <span class="va">ageclass</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">18</span><span class="op">)</span> <span class="st">"child"</span> <span class="kw">else</span> <span class="st">"adult"</span>
             , <span class="va">gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span>
             , <span class="va">gender</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span> <span class="va">gender</span>
                               , <span class="st">"V"</span> <span class="op">=</span> <span class="st">"F"</span>
                               , <span class="va">gender</span>
                               <span class="op">)</span>
             <span class="op">)</span>

<span class="co"># modify a copy of the table</span>
<span class="fu"><a href="https://rdrr.io/pkg/dcmodify/man/modify.html" class="external-link">modify</a></span><span class="op">(</span><span class="va">person_tbl</span>, <span class="va">m</span>, copy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># Source:   lazy query [?? x 6]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Database: sqlite 3.37.2 [:memory:]</span></span>
<span class="co">#&gt;   income   age gender  year smokes cigarrettes ageclass</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>      0    12 M       <span style="text-decoration: underline;">2</span>020 yes             10 child   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>      0    14 F       <span style="text-decoration: underline;">2</span>019 yes              4 child   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>   <span style="text-decoration: underline;">2</span>010    25 F       <span style="text-decoration: underline;">2</span>019 no               0 adult</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/dump_sql.html">dump_sql</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">person_tbl</span><span class="op">)</span>
<span class="co">#&gt; -- -------------------------------------</span>
<span class="co">#&gt; -- Generated with dcmodifydb, do not edit</span>
<span class="co">#&gt; -- dcmodify version: 0.1.9</span>
<span class="co">#&gt; -- dcmodifydb version: 0.3.0.9000</span>
<span class="co">#&gt; -- dplyr version: 1.0.8</span>
<span class="co">#&gt; -- dbplyr version: 2.1.1</span>
<span class="co">#&gt; -- from: 'command-line'</span>
<span class="co">#&gt; -- date: 2022-03-02</span>
<span class="co">#&gt; -- -------------------------------------</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ALTER TABLE `person`</span>
<span class="co">#&gt; ADD COLUMN `ageclass` character;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; -- M1: </span>
<span class="co">#&gt; -- </span>
<span class="co">#&gt; -- R expression: if (age &lt; 16) income = 0</span>
<span class="co">#&gt; UPDATE `person`</span>
<span class="co">#&gt; SET `income` = 0.0</span>
<span class="co">#&gt; WHERE `age` &lt; 16.0;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; -- M2: </span>
<span class="co">#&gt; -- </span>
<span class="co">#&gt; -- R expression: if (year &lt; 25) year = year + 2000</span>
<span class="co">#&gt; UPDATE `person`</span>
<span class="co">#&gt; SET `year` = `year` + 2000.0</span>
<span class="co">#&gt; WHERE `year` &lt; 25.0;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; -- M3: </span>
<span class="co">#&gt; -- </span>
<span class="co">#&gt; -- R expression: if (cigarrettes &gt; 0) smokes = "yes"</span>
<span class="co">#&gt; UPDATE `person`</span>
<span class="co">#&gt; SET `smokes` = 'yes'</span>
<span class="co">#&gt; WHERE `cigarrettes` &gt; 0.0;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; -- M4: </span>
<span class="co">#&gt; -- </span>
<span class="co">#&gt; -- R expression: if (smokes == "no") cigarrettes = 0</span>
<span class="co">#&gt; UPDATE `person`</span>
<span class="co">#&gt; SET `cigarrettes` = 0.0</span>
<span class="co">#&gt; WHERE `smokes` = 'no';</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; -- M5: </span>
<span class="co">#&gt; -- </span>
<span class="co">#&gt; -- R expression: ageclass &lt;- if (age &lt; 18) "child" else "adult"</span>
<span class="co">#&gt; UPDATE `person`</span>
<span class="co">#&gt; SET `ageclass` = 'child'</span>
<span class="co">#&gt; WHERE `age` &lt; 18.0;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; UPDATE `person`</span>
<span class="co">#&gt; SET `ageclass` = 'adult'</span>
<span class="co">#&gt; WHERE NOT(`age` &lt; 18.0);</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; -- M6: </span>
<span class="co">#&gt; -- </span>
<span class="co">#&gt; -- R expression: gender &lt;- toupper(gender)</span>
<span class="co">#&gt; UPDATE `person`</span>
<span class="co">#&gt; SET `gender` = UPPER(`gender`)</span>
<span class="co">#&gt; ;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; -- M7: </span>
<span class="co">#&gt; -- </span>
<span class="co">#&gt; -- R expression: gender &lt;- switch(gender, V = "F", gender)</span>
<span class="co">#&gt; UPDATE `person`</span>
<span class="co">#&gt; SET `gender` = CASE `gender` WHEN ('V') THEN ('F') ELSE (`gender`) END</span>
<span class="co">#&gt; ;</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Edwin de Jonge.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
